# Request Interpretation: Enterprise Prompt Optimization Research

## Original Request
Analyze external agents and optimize our own agents with enterprise-level research methodology, finding recurring patterns to optimize.

## Understanding

### What is Being Asked
Conduct comprehensive analysis of the external agent prompts (`/external/agents/`) to:
1. Identify recurring patterns, anti-patterns, and optimization opportunities
2. Apply learnings to optimize our internal agents (`/agents/`)
3. Deliver at enterprise multibillion-dollar company quality standards

### Why (Business Context)
- We are a "bleeding edge top level prompt engineering optimization company in 2028"
- Model output quality directly impacts business value
- Sub-agent orchestration is critical and must remain prominent
- Every token matters for effectiveness and cost

### Success Looks Like
- Comprehensive pattern analysis with evidence
- Optimized versions of internal agents
- Updated kernel documents with discovered optimizations
- Improved sub-agent protocols based on learnings
- Enterprise-quality documentation

## Scope Analysis

### Definitely In Scope
- Analysis of all 8 external agents
- Analysis of external `lib/` reference documents
- Optimization of `end-to-end.agent.md`
- Optimization of kernel documents
- Optimization of templates
- Pattern extraction and documentation

### Probably In Scope
- Creating new optimization patterns library
- Memory/suggestions updates
- Training data generation

### Definitely Out of Scope
- Changing the external agents themselves
- Removing sub-agent emphasis (explicitly preserved)
- Creating entirely new agent types

## Key Observations from Initial Read

### External Agent Patterns Identified

1. **Identity/Role Definition Pattern**
   - All agents define: Role, Mindset, Style, Superpower
   - "Three Laws of X" pattern used consistently

2. **ALWAYS/NEVER Lists**
   - Critical rules pattern appears in all agents
   - Creates clear behavioral boundaries

3. **State Management**
   - STATE.md pattern for persistence
   - YAML-formatted state tracking

4. **Sub-Agent Templates**
   - Embedded markdown templates for spawning sub-agents
   - Structured return format requirements

5. **Visual Architecture**
   - ASCII diagrams for workflows
   - Mermaid diagrams for flows
   - Tables for structured information

6. **Verification Obsession**
   - `npm run check` after every change
   - 3-attempt escalation rule
   - Multi-level verification (quick/full/comprehensive)

## Gaps in Internal Agents

Preliminary observations:

1. **Missing Identity Section**
   - External agents have Role/Mindset/Style/Superpower
   - Internal agents lack this identity framework

2. **Sub-Agent Templates Less Structured**
   - External has embedded templates with RETURN FORMAT
   - Internal references external templates more loosely

3. **Verification Patterns**
   - External has detailed verification lib
   - Internal assumes verification happens

4. **Skepticism Framework**
   - External has explicit skepticism.md
   - Internal lacks similar self-doubt mechanisms

## Success Criteria

- [ ] Pattern analysis documented with evidence
- [ ] At least 15 optimization patterns identified
- [ ] All internal agents updated with improvements
- [ ] Kernel documents enhanced with discoveries
- [ ] Templates improved with patterns
- [ ] Memory files created for learnings
- [ ] Verification: agents are more effective after changes

## Next Phase

PROCEED TO ANALYSIS via sub-agents:
1. Pattern Analysis Sub-Agent (external agents)
2. Gap Analysis Sub-Agent (internal vs external)
3. Optimization Design Sub-Agent

